{% extends 'layout2.html' %}
{%block content%}
    <div class="container mt-5">
        <h2 class="mb-4">Professional Dashboard Summary</h2>
        <div class="row">
            <div class="col-md-3 mb-4">
                <div class="card text-white bg-primary">
                    <div class="card-header">Total Requests</div>
                    <div class="card-body">
                        <h3 class="card-title">{{ request_summary.total }}</h3>
                    </div>
                </div>
            </div>
            <div class="col-md-3 mb-4">
                <div class="card text-white bg-warning">
                    <div class="card-header">Pending Requests</div>
                    <div class="card-body">
                        <h3 class="card-title">{{ request_summary.pending }}</h3>
                    </div>
                </div>
            </div>
            <div class="col-md-3 mb-4">
                <div class="card text-white bg-success">
                    <div class="card-header">Completed Requests</div>
                    <div class="card-body">
                        <h3 class="card-title">{{ request_summary.completed }}</h3>
                    </div>
                </div>
            </div>
            <div class="col-md-3 mb-4">
                <div class="card text-white bg-danger">
                    <div class="card-header">Rejected Requests</div>
                    <div class="card-body">
                        <h3 class="card-title">{{ request_summary.rejected }}</h3>
                    </div>
                </div>
            </div>
        </div>

        <h4>Closed Services</h4>
        <table class="table table-striped">
            <thead>
                <tr>
                    <th>Request ID</th>
                    <th>Service</th>
                    <th>Customer</th>
                    <th>Request Date</th>
                    <th>Completion Date</th>
                    <th>Customer Address</th>
                    <th>Rating</th>
                    <th>Remarks</th>
                    
                    <th>Status</th>
                </tr>
            </thead>
            <tbody>
                {% for request in service_requests %}
                    {% if request.status == 'Completed' or request.status == 'Rejected'  %}
                    <tr>
                        <td>{{ request.id }}</td>
                        <td>{{ request.service.name }}</td>
                        <td>{{ request.costumer.full_name }}</td>
                        <td>{{ request.date_of_request }}</td>
                        <td>{{ request.date_of_completion }}</td>
                        <td>{{ request.costumer.Address }}</td>
                        <td>
                            {% if request.rating %}
                                {{ request.rating }} / 5
                            {% else %}
                                Not rated
                            {% endif %}
                        </td>
                        <td>{{ request.remarks }}</td>
                        
                        
                        
                            <td>{{request.status}}
                            
                        </td>
    
                    </tr>
                    {% endif %}
                {% endfor %}
            </tbody>
        </table>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
{%endblock%}